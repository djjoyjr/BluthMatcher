
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>BluthFinder</title>

	<!-- Latest compiled and minified CSS & JS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

	<!-- Font Awesome Glyphicons -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">

</head>
<body>

	<div class="container">

		<div class="jumbotron">
			<img src="https://ih1.redbubble.net/image.404925388.7156/flat,800x800,070,f.jpg">
      <h1>Bluth Matcher</h1>
			<hr>
			<h2 class="">Answer a few basic questions. </h2>
			<h2 class="">Then find the Bluth family member with whom you're most compatible!</h2>
			<br>

			<div class="">
				<a href="/survey"><button type="button" class="btn btn-lg btn-primary"><h4><span class="glyphicon glyphicon-list-alt"></span> Go to Survey</h4></button></a>
			</div>

		</div>
    <!-- Modal -->
    	<div id="resultsModal" class="modal fade" role="dialog">
    	  <div class="modal-dialog">

    	    <!-- Modal content-->
    	    <div class="modal-content">
    	      <div class="modal-header">
    	        <button type="button" class="close" data-dismiss="modal">&times;</button>
    	        <h2 class="modal-title"><strong>Best Match</strong></h2>
    	      </div>
    	      <div class="modal-body">
    	        <h2 id="matchName"></h2>
<!--     	        <img id="matchImg" src="https://media.licdn.com/mpr/mpr/shrinknp_400_400/p/6/005/064/1bd/3435aa3.jpg" alt="">
 -->    	      </div>
    	      <div class="modal-footer">
    	        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
    	      </div>
    	    </div>

    	  </div>
    	</div>

	</div>

  <footer class="footer">
    <div class="container">
      <p><a href="/api/friends">API Friends List</a></p>
    </div>
	</footer>

</body>
</html>
<script type="text/javascript">
// Capture the form inputs
  $("#submit").on("click", function(){

    // Form validation
    function validateForm() {
    var isValid = true;
    $('.form-control').each(function() {
      if ( $(this).val() === '' )
          isValid = false;
    });

    $('.chosen-select').each(function() {

      if( $(this).val() === "")
        isValid = false
    })
    return isValid;
  }

  // If all required fields are filled
  if (validateForm() == true)
  {
    // Create an object for the user's data
      var userData = {
        name: $("#name").val(),
        photo: $("#photo").val(),
        answers: [
          $("#q1").val(),
          $("#q2").val(),
          $("#q3").val(),
          $("#q4").val(),
          $("#q5").val(),
          $("#q6").val(),
          $("#q7").val(),
          $("#q8").val(),
          $("#q9").val(),
          $("#q10").val(),
        ]
      };

      // Grab the URL of the website
      var currentURL = window.location.origin;

      // AJAX post the data to the friends API.
      $.post(currentURL + "/api/friends", userData, function(data){

        // Grab the result from the AJAX post so that the best match's name and photo are displayed.
        $("#matchName").text(data.name);
        $('#matchImg').attr("src", data.photo);

        // Show the modal with the best match
        $("#resultsModal").modal('toggle');

      });
  }
  else
  {
    alert("Please fill out all fields before submitting!");
  }

    return false;
  });
</script>
